<section class="content-wrapper">
  <div class="page-title border-bottom title-border">
    <div class="content">
      <div class="row">
        <div class="col-lg-12">
          <h5 class="text-gray d-inline">Tickets</h5>
          <h5 class="text-gray d-inline"> <i class="fa fa-angle-right"></i></h5>
          <h5 class="text-dark d-inline">View Ticket</h5>
        </div>
      </div>
    </div>
  </div>
  <div class="content position-relative">
    <div class="d-flex align-items-center justify-content-between mt-2 search-card flex-wrap">
      <div class="d-flex align-items-center flex-wrap my-1">
        <div style="width: 300px;" class="mr-2 my-1 form-group mb-0 has-search d-flex position-relative">
          <%= image_pack_tag 'sample/search.svg', class: 'mr-3 form-control-feedback search-icon', width: '16' %>
          <input type="text" class="form-control searchbox" placeholder="Search Ticket"
            id="searchbox">
        </div>
        <button class="btn btn-primary form-group search_btn mb-0 my-1">Search</button>
      </div>
      <div class="my-1">
        <%= link_to "Add Ticket", new_ticket_path, remote: true, class: 'btn btn-primary mb-0 text-white' %>
      </div>
    </div>
    <div class="admin-table bg-white table-responsive mt-3 ticket_list_div">
      <%= render 'ticket_list', tickets: @tickets %>
    </div>
  </div>
</section>
<script>
  $(document).ready(function(){
    $('.modal-table').DataTable({
        "paging":   false,
        "info":     false});
  })
  $(document).on('change', '.status_select', function(){
    selected_status = $(this).find('option:selected').text();
    selected_id = $(this).parent().attr('id')
    $.ajax({
      url: "/tickets/"+selected_id+"/update_status",
      type: 'PUT',
      data: {id: selected_id, status: selected_status},
      dataType: "script",
      success: function(result){
      }
    });
  })
</script>
