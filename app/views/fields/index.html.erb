<section class="content-wrapper bg-light">
  <div class="page-title border-bottom title-border bg-white">
    <div class="content">
      <div class="row">
        <div class="col-lg-12">
          <h5 class="text-gray d-inline"><%= link_to 'Settings', settings_path, class: 'text-gray' %></h5>
          <h5 class="text-gray d-inline"> <i class="fa fa-angle-right"></i></h5>
          <h5 class="text-dark d-inline">Dynamic Fields Settings</h5>
        </div>
      </div>
    </div>
  </div>
  <div class="content position-relative tab-section bg-light pt-0">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item mt-3">
        <a class="nav-link active fs-20 mx-sm-4 header_tabs" id="business-tab" data-toggle="tab"
          href="#business-tab-body" role="tab" aria-controls="business-tab-body" aria-selected="true">Business</a>
      </li>
      <li class="nav-item mt-3 mr-auto">
        <a class="nav-link fs-20 mx-sm-4 header_tabs" id="user-tab" data-toggle="tab"
          href="#user-tab-body" role="tab" aria-controls="user-tab-body" aria-selected="true">User</a>
      </li>
      <li class="mt-3 mt-md-0 d-flex align-items-center">
        <div class="ml-4 d-inline">
          <%= link_to "Add Field", new_field_path(klass_id: Klass.business.id), remote: true, class: 'btn btn-primary add_business_field' %>
        </div>
      </li>
      <li class="mt-3 mt-md-0 d-none align-items-center">
        <div class="ml-4 d-inline">
          <%= link_to "Add Field", new_field_path(klass_id: Klass.user.id), remote: true, class: 'btn btn-primary add_user_field' %>
        </div>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="business-tab-body" role="tabpanel" aria-labelledby="business-tab">
        <%= render 'fields_list', klass: Klass.business %>
      </div>
      <div class="tab-pane fade" id="user-tab-body" role="tabpanel" aria-labelledby="user-tab">
        <%= render 'fields_list', klass: Klass.user %>
      </div>
    </div>
  </div>
</section>
<script>
  $('.header_tabs').on('click', function(){
    if(this.id == 'user-tab'){
      $('.add_user_field').closest('li').removeClass('d-none').addClass('d-flex');
      $('.add_business_field').closest('li').removeClass('d-flex').addClass('d-none');
    } else {
      $('.add_business_field').closest('li').removeClass('d-none').addClass('d-flex');
      $('.add_user_field').closest('li').removeClass('d-flex').addClass('d-none');
    }
  })
</script>
